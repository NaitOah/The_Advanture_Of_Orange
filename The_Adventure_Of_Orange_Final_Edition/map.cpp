#include "map.h"

void initialize_map(int map[HEIGHT][WIDTH], int floor) {
    if (floor == 1) {
        int initial_map1[HEIGHT][WIDTH] = {
            {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
            {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
            {1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1},
            {1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1},
            {1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1},
            {1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1},
            {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
            {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1}
        };

        // 复制矩阵
        for (int i = 0; i < HEIGHT; i++) {
            for (int j = 0; j < WIDTH; j++) {
                map[i][j] = initial_map1[i][j];
            }
        }

        // 放置物品
        map[5][4] = SWORD;
        map[3][3] = ORANGE;
        map[6][4] = ORANGE;
        map[6][6] = ORANGE;
        map[2][1] = KEY;
        map[8][1] = ENEMY; // 移动敌人到可以攻击的位置
        map[1][12] = DOOR;
        map[5][2] = NPC_1; // 放置NPC
        map[7][1] = UP_STAIRS; // 上楼楼梯
    } else if (floor == 2) {
        int initial_map2[HEIGHT][WIDTH] = {
            {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
            {1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1},
            {1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0, 1},
            {1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1},
            {1, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1},
            {1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 1, 1, 1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1},
            {1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 1},
            {1, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1},
            {1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1},
            {1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 0, 1, 1, 0, 1},
            {1, 0, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1},
            {1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 1, 0, 1},
            {1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1},
            {1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1}
        };

        // 复制矩阵
        for (int i = 0; i < HEIGHT; i++) {
            for (int j = 0; j < WIDTH; j++) {
                map[i][j] = initial_map2[i][j];
            }
        }

        // 放置物品
        map[1][1] = DOWN_STAIRS;

        map[4][13] = ORANGE;
        map[8][2] = ORANGE;
        map[13][1] = ORANGE;

        map[7][4] = KEY;
        map[2][13] = KEY;
        map[9][12] = KEY;

        map[7][9] = DOOR;
        map[12][5] = DOOR;

        map[6][1] = ENEMY;    // enemy_1.png
        map[12][7] = ENEMY_2; // enemy_2.png

        map[12][8] = PRINCESS; // 添加公主的位置
    }
}
